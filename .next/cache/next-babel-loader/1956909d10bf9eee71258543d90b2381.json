{"ast":null,"code":"import \"antd/lib/empty/style\";\nimport _Empty from \"antd/lib/empty\";\nvar __jsx = React.createElement;\nimport { useState, useEffect, useLayoutEffect } from 'react';\nimport React, { Component } from 'react';\nimport Styled from 'styled-components';\nimport http from '../../utils/http';\nimport { injectIntl } from 'react-intl';\nvar GridH5 = injectIntl(function (_ref) {\n  var url = _ref.url,\n      columns = _ref.columns,\n      _ref$otherParam = _ref.otherParam,\n      otherParam = _ref$otherParam === void 0 ? '' : _ref$otherParam,\n      isShow = _ref.isShow,\n      intl = _ref.intl;\n\n  var _useState = useState([]),\n      gridData = _useState[0],\n      setGridData = _useState[1];\n\n  var ps = 6;\n\n  var _useState2 = useState(1),\n      pn = _useState2[0],\n      setPn = _useState2[1];\n\n  var _useState3 = useState(0),\n      totalPage = _useState3[0],\n      setTotalPage = _useState3[1];\n\n  var _useState4 = useState(true),\n      first = _useState4[0],\n      setFirst = _useState4[1];\n\n  var init = function init(number, type) {\n    http.get(\"\".concat(url, \"?pn=\").concat(number || pn, \"&ps=\").concat(ps).concat(otherParam), function (data) {\n      var number = data.total % ps === 0 ? data.total / ps : Math.ceil(data.total / ps);\n      setTotalPage(number);\n      setGridData(type === 'concat' ? gridData.concat(data.rows) : data.rows);\n    });\n  };\n\n  useEffect(function () {\n    isShow && init();\n  }, []);\n  useEffect(function () {\n    if (first) {\n      setFirst(false);\n    } else {\n      setPn(1);\n      init(1);\n    }\n  }, [otherParam]);\n\n  var handleNextPage = function handleNextPage() {\n    setPn(pn + 1);\n    init(pn + 1, 'concat');\n  };\n\n  return __jsx(Box, null, gridData.map(function (item) {\n    return __jsx(GridList, {\n      key: item._id\n    }, __jsx(\"div\", {\n      className: \"rs-h5-grid-title\"\n    }, columns[0].title, \" # \", columns[0].render(item[columns[0].dataIndex], item)), columns.slice(1).map(function (col) {\n      return col.h5 ? __jsx(\"div\", {\n        className: \"rs-h5-table-li\",\n        key: col.dataIndex\n      }, __jsx(\"span\", null, col.title, \":\"), __jsx(\"p\", null, col.render(item[col.dataIndex], item))) : '';\n    }));\n  }), gridData.length === 0 && __jsx(_Empty, {\n    style: {\n      paddingTop: 20\n    }\n  }), totalPage !== 0 && pn < totalPage && __jsx(\"div\", {\n    className: \"next-page\",\n    onClick: function onClick() {\n      return handleNextPage();\n    }\n  }, intl.messages.lang63));\n});\nvar Box = Styled.div.withConfig({\n  displayName: \"Grid-h5__Box\",\n  componentId: \"sc-1jk98l4-0\"\n})([\"padding-bottom:30px;.next-page{margin-top:20px;text-align:center;color:#1890ff;height:50px;line-height:50px;font-size:16px;}\"]);\nvar GridList = Styled.div.withConfig({\n  displayName: \"Grid-h5__GridList\",\n  componentId: \"sc-1jk98l4-1\"\n})([\"box-shadow:0 0 8px 0 hsla(0,0%,40%,.11);background:#fff;padding:10px;margin-bottom:10px;border-radius:6px;.rs-h5-grid-title{height:30px;line-height:30px;border-bottom:1px solid #eee;margin-bottom:10px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}.rs-h5-table-li{display:flex;line-height:25px;> span{text-align:right;color:rgb(119,130,177);padding-right:10px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}p{flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin:0;}}\"]);\nexport default GridH5;","map":{"version":3,"sources":["/Users/libaozhong/cr/ccm-front/components/table/Grid-h5.js"],"names":["useState","useEffect","useLayoutEffect","React","Component","Styled","http","injectIntl","GridH5","url","columns","otherParam","isShow","intl","gridData","setGridData","ps","pn","setPn","totalPage","setTotalPage","first","setFirst","init","number","type","get","data","total","Math","ceil","concat","rows","handleNextPage","map","item","_id","title","render","dataIndex","slice","col","h5","length","paddingTop","messages","lang63","Box","div","GridList"],"mappings":"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","sourcesContent":["import { useState, useEffect, useLayoutEffect } from 'react'\nimport React, { Component } from 'react'\nimport Styled from 'styled-components'\nimport http from '../../utils/http'\nimport { injectIntl } from 'react-intl'\nimport { Empty } from 'antd'\n\nconst GridH5 = injectIntl(({ url, columns, otherParam = '', isShow, intl }) => {\n  const [gridData, setGridData] = useState([])\n  const ps = 6\n  const [pn, setPn] = useState(1)\n  const [totalPage, setTotalPage] = useState(0)\n  const [first, setFirst] = useState(true)\n\n  const init = (number, type) => {\n    http.get(`${url}?pn=${number || pn}&ps=${ps}${otherParam}`, (data) => {\n      const number = data.total % ps === 0 ? data.total / ps : Math.ceil(data.total / ps)\n      setTotalPage(number)\n      setGridData(type === 'concat' ? gridData.concat(data.rows) : data.rows)\n    })\n  }\n\n  useEffect(() => {\n    isShow && init()\n  }, [])\n\n  useEffect(() => {\n    if (first) {\n      setFirst(false)\n    } else {\n      setPn(1)\n      init(1)\n    }\n  }, [otherParam])\n\n  const handleNextPage = () => {\n    setPn(pn + 1)\n    init(pn + 1, 'concat')\n  }\n\n  return (\n    <Box>\n      {gridData.map((item) => (\n        <GridList key={item._id}>\n          <div className=\"rs-h5-grid-title\">\n            {columns[0].title} # {columns[0].render(item[columns[0].dataIndex], item)}\n          </div>\n          {columns.slice(1).map((col) =>\n            col.h5 ? (\n              <div className=\"rs-h5-table-li\" key={col.dataIndex}>\n                <span>{col.title}:</span>\n                <p>{col.render(item[col.dataIndex], item)}</p>\n              </div>\n            ) : (\n              ''\n            )\n          )}\n        </GridList>\n      ))}\n      {gridData.length === 0 && <Empty style={{ paddingTop: 20 }} />}\n      {totalPage !== 0 && pn < totalPage && (\n        <div className=\"next-page\" onClick={() => handleNextPage()}>\n          {intl.messages.lang63}\n        </div>\n      )}\n    </Box>\n  )\n})\nconst Box = Styled.div`\n  padding-bottom:30px;\n  .next-page{\n    margin-top: 20px;\n    text-align: center;\n    color: #1890ff;\n    height: 50px;\n    line-height: 50px;\n    font-size: 16px;\n  }\n`\nconst GridList = Styled.div`\n  box-shadow: 0 0 8px 0 hsla(0,0%,40%,.11);\n  background:#fff;\n  padding: 10px;\n  margin-bottom:10px;\n  border-radius: 6px;\n  .rs-h5-grid-title{\n    height:30px;\n    line-height: 30px;\n    border-bottom: 1px solid #eee;\n    margin-bottom: 10px;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  }\n  .rs-h5-table-li{\n    display:flex;\n    line-height:25px;\n     > span{\n      text-align:right;\n      color:rgb(119, 130, 177);\n      padding-right:10px;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n    }\n    p{\n      flex:1;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      margin:0;\n    }\n  }\n`\n\nexport default GridH5\n"]},"metadata":{},"sourceType":"module"}